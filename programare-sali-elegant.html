<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programare SƒÉli - Sistem Elegant de RezervƒÉri</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #ffdde1 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(255, 105, 135, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b9d 0%, #ffc371 100%);
            color: white;
            padding: 35px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .controls {
            background: linear-gradient(135deg, #fff0f3 0%, #ffe4e9 100%);
            padding: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            border-bottom: 4px solid #ff6b9d;
        }

        .week-selector {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .week-selector button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #ff6b9d 0%, #ffc371 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }

        .week-selector button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
        }

        .current-week {
            font-size: 1.3em;
            font-weight: 700;
            color: #ff1654;
            background: white;
            padding: 10px 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(255, 107, 157, 0.2);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #ff1654;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(168, 237, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #8b4513;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 236, 210, 0.4);
        }

        .calendar-container {
            padding: 20px;
            overflow-x: auto;
        }

        .calendar {
            min-width: 1200px;
            border-collapse: collapse;
            width: 100%;
        }

        .calendar th {
            background: linear-gradient(135deg, #ff6b9d 0%, #ffc371 100%);
            color: white;
            padding: 18px;
            font-weight: 700;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 10;
            border: 2px solid #ff9ebb;
        }

        .calendar th.time-header {
            background: linear-gradient(135deg, #ff8fab 0%, #ffd38f 100%);
            min-width: 80px;
        }

        .calendar td {
            border: 2px solid #ffd6e0;
            padding: 10px;
            text-align: center;
            min-width: 140px;
            height: 65px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            background: white;
        }

        .calendar td.time-cell {
            background: linear-gradient(135deg, #fff5f7 0%, #ffe9f0 100%);
            font-weight: 700;
            color: #ff1654;
            cursor: default;
            border: 2px solid #ffb3c6;
        }

        .calendar td:not(.time-cell):hover {
            background: linear-gradient(135deg, #fff0f5 0%, #ffe4ec 100%);
            transform: scale(1.03);
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
            border-color: #ff6b9d;
        }

        .calendar td.reserved {
            background: linear-gradient(135deg, #ffd6e8 0%, #ffeaf2 100%);
            color: #c2185b;
            font-weight: 600;
            border: 2px solid #ff6b9d;
        }

        .calendar td.reserved:hover {
            background: linear-gradient(135deg, #ffc8df 0%, #ffe0ed 100%);
        }

        .calendar td.confirmed {
            background: linear-gradient(135deg, #e1bee7 0%, #f3e5f5 100%);
            color: #6a1b9a;
            font-weight: 600;
            border: 2px solid #ba68c8;
        }

        .calendar td.paid {
            background: linear-gradient(135deg, #c5e1a5 0%, #dcedc8 100%);
            color: #558b2f;
            font-weight: 600;
            border: 2px solid #8bc34a;
        }

        .calendar td.recurring {
            border: 3px dashed #ff1654 !important;
            box-shadow: inset 0 0 10px rgba(255, 22, 84, 0.1);
        }

        .client-name {
            font-size: 0.95em;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .client-phone {
            font-size: 0.8em;
            opacity: 0.85;
        }

        .recurring-badge {
            position: absolute;
            top: 3px;
            right: 3px;
            background: #ff1654;
            color: white;
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 700;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 107, 157, 0.4);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 35px;
            border-radius: 25px;
            max-width: 550px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 50px rgba(255, 107, 157, 0.4);
            border: 3px solid #ff9ebb;
        }

        .modal-header {
            font-size: 2em;
            font-weight: 700;
            background: linear-gradient(135deg, #ff6b9d 0%, #ffc371 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #ff9ebb;
        }

        .form-group {
            margin-bottom: 22px;
        }

        .form-group label {
            display: block;
            font-weight: 700;
            color: #ff1654;
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #ffd6e0;
            border-radius: 15px;
            font-size: 1em;
            transition: all 0.3s;
            background: #fffbfc;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #ff6b9d;
            box-shadow: 0 0 0 4px rgba(255, 107, 157, 0.15);
            background: white;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 90px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: linear-gradient(135deg, #fff5f7 0%, #ffe9f0 100%);
            border-radius: 15px;
            border: 2px solid #ffd6e0;
        }

        .checkbox-group input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #ff6b9d;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            color: #ff1654;
            font-weight: 600;
        }

        .recurring-options {
            display: none;
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(135deg, #fffbfc 0%, #fff5f7 100%);
            border-radius: 15px;
            border: 2px dashed #ff6b9d;
        }

        .recurring-options.active {
            display: block;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
            margin-top: 28px;
        }

        .modal-buttons button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 20px;
            font-size: 1.05em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-save {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #ff1654;
        }

        .btn-save:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(168, 237, 234, 0.5);
        }

        .btn-delete {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-delete:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.5);
        }

        .btn-cancel {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #8b4513;
        }

        .btn-cancel:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 236, 210, 0.5);
        }

        .legend {
            padding: 25px;
            background: linear-gradient(135deg, #fff0f3 0%, #ffe4e9 100%);
            border-top: 4px solid #ff6b9d;
        }

        .legend h3 {
            color: #ff1654;
            margin-bottom: 18px;
            font-size: 1.5em;
        }

        .legend-items {
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background: white;
            padding: 12px 18px;
            border-radius: 15px;
            border: 2px solid #ffd6e0;
        }

        .legend-color {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            border: 2px solid #ff6b9d;
        }

        .color-free { 
            background: white; 
        }
        .color-reserved { 
            background: linear-gradient(135deg, #ffd6e8 0%, #ffeaf2 100%); 
        }
        .color-confirmed { 
            background: linear-gradient(135deg, #e1bee7 0%, #f3e5f5 100%); 
        }
        .color-paid { 
            background: linear-gradient(135deg, #c5e1a5 0%, #dcedc8 100%); 
        }
        .color-recurring { 
            background: white;
            border: 3px dashed #ff1654;
        }

        .stats {
            padding: 25px;
            background: white;
            border-top: 2px solid #ffd6e0;
        }

        .stats h3 {
            color: #ff1654;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #ff6b9d 0%, #ffc371 100%);
            color: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(255, 107, 157, 0.4);
        }

        .stat-card h4 {
            font-size: 1.2em;
            margin-bottom: 12px;
            opacity: 0.95;
        }

        .stat-card .stat-value {
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .info-readonly {
            background: linear-gradient(135deg, #fff5f7 0%, #ffe9f0 100%);
            padding: 15px;
            border-radius: 15px;
            font-size: 1em;
            color: #ff1654;
            margin-bottom: 20px;
            border: 2px solid #ffd6e0;
            font-weight: 600;
        }

        .help-section {
            background: linear-gradient(135deg, #fff0f3 0%, #ffe4e9 100%);
            padding: 30px;
            border-top: 4px solid #ff6b9d;
        }

        .help-section h3 {
            color: #ff1654;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .help-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .help-card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            border: 3px solid #ff9ebb;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.2);
        }

        .help-card h4 {
            color: #ff1654;
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .help-card ol, .help-card ul {
            margin-left: 20px;
            color: #555;
            line-height: 1.8;
        }

        .help-card li {
            margin-bottom: 8px;
        }

        .help-card strong {
            color: #ff1654;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .week-selector {
                flex-direction: column;
            }

            .action-buttons {
                flex-direction: column;
            }

            .modal-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå∏ Programare SƒÉli ElegantƒÉ</h1>
            <p>Sistem Complet de RezervƒÉri cu Recuren»õƒÉ - 3 SƒÉli</p>
        </div>

        <div class="controls">
            <div class="week-selector">
                <button onclick="previousWeek()">‚óÄ SƒÉptƒÉm√¢na AnterioarƒÉ</button>
                <span class="current-week" id="currentWeek"></span>
                <button onclick="nextWeek()">SƒÉptƒÉm√¢na UrmƒÉtoare ‚ñ∂</button>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="goToToday()">üìç SƒÉptƒÉm√¢na CurentƒÉ</button>
                <button class="btn btn-secondary" onclick="exportData()">üíæ SalveazƒÉ Backup</button>
                <button class="btn btn-secondary" onclick="importData()">üìÇ RestaureazƒÉ Backup</button>
            </div>
        </div>

        <div class="calendar-container">
            <table class="calendar" id="calendar">
                <thead>
                    <tr>
                        <th class="time-header">ORA</th>
                        <th colspan="3">LUNI</th>
                        <th colspan="3">MAR»öI</th>
                        <th colspan="3">MIERCURI</th>
                        <th colspan="3">JOI</th>
                        <th colspan="3">VINERI</th>
                        <th colspan="3">S√ÇMBƒÇTƒÇ</th>
                        <th colspan="3">DUMINICƒÇ</th>
                    </tr>
                    <tr>
                        <th class="time-header"></th>
                        <th>Sala 1</th>
                        <th>Sala 2</th>
                        <th>Sala 3</th>
                        <th>Sala 1</th>
                        <th>Sala 2</th>
                        <th>Sala 3</th>
                        <th>Sala 1</th>
                        <th>Sala 2</th>
                        <th>Sala 3</th>
                        <th>Sala 1</th>
                        <th>Sala 2</th>
                        <th>Sala 3</th>
                        <th>Sala 1</th>
                        <th>Sala 2</th>
                        <th>Sala 3</th>
                        <th>Sala 1</th>
                        <th>Sala 2</th>
                        <th>Sala 3</th>
                        <th>Sala 1</th>
                        <th>Sala 2</th>
                        <th>Sala 3</th>
                    </tr>
                </thead>
                <tbody id="calendarBody">
                </tbody>
            </table>
        </div>

        <div class="stats">
            <h3>üìä Statistici SƒÉptƒÉm√¢nƒÉ CurentƒÉ</h3>
            <div class="stats-grid" id="statsGrid">
            </div>
        </div>

        <div class="legend">
            <h3>üé® LegendƒÉ Status RezervƒÉri</h3>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color color-free"></div>
                    <span><strong>Liber</strong> - Disponibil pentru rezervare</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color color-reserved"></div>
                    <span><strong>Rezervat</strong> - Client a rezervat</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color color-confirmed"></div>
                    <span><strong>Confirmat</strong> - Rezervare confirmatƒÉ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color color-paid"></div>
                    <span><strong>PlƒÉtit</strong> - Client a plƒÉtit √Æn avans</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color color-recurring"></div>
                    <span><strong>üîÑ Recurent</strong> - Se repetƒÉ sƒÉptƒÉm√¢nal</span>
                </div>
            </div>
        </div>

        <div class="help-section">
            <h3>üìñ Cum Folose»ôti Aplica»õia</h3>
            
            <div class="help-steps">
                <div class="help-card">
                    <h4>üéØ 1. Salvare »ôi Acces</h4>
                    <ol>
                        <li><strong>Salvare pe PC:</strong> Click dreapta pe fi»ôier ‚Üí "SalveazƒÉ ca" ‚Üí Alege folder (ex: Desktop)</li>
                        <li><strong>Deschidere:</strong> Dublu-click pe fi»ôier SAU drag & drop √Æn browser</li>
                        <li><strong>Func»õioneazƒÉ OFFLINE</strong> - nu trebuie internet!</li>
                        <li><strong>Datele se salveazƒÉ automat</strong> √Æn browser</li>
                    </ol>
                </div>

                <div class="help-card">
                    <h4>üíæ 2. Backup & Siguran»õƒÉ</h4>
                    <ul>
                        <li><strong>Backup zilnic:</strong> Click "üíæ SalveazƒÉ Backup" ‚Üí Se descarcƒÉ fi»ôier .json</li>
                        <li><strong>PƒÉstreazƒÉ backup-urile</strong> pe Google Drive / Dropbox</li>
                        <li><strong>Restaurare:</strong> "üìÇ RestaureazƒÉ Backup" ‚Üí Alegi fi»ôierul .json</li>
                        <li><strong>IMPORTANT:</strong> Backup-ul √Æ»õi salveazƒÉ TOATE rezervƒÉrile!</li>
                    </ul>
                </div>

                <div class="help-card">
                    <h4>üåê 3. Partajare cu Clien»õii</h4>
                    <ol>
                        <li><strong>Op»õiune 1 - Screenshot:</strong> PrintScreen calendar ‚Üí Trimi»õi pe WhatsApp/Email</li>
                        <li><strong>Op»õiune 2 - Google Drive:</strong>
                            <ul style="margin-top: 10px;">
                                <li>UrcƒÉ fi»ôierul HTML pe Google Drive</li>
                                <li>Click dreapta ‚Üí "Ob»õine link"</li>
                                <li>SeteazƒÉ "Oricine cu linkul poate VEDEA"</li>
                                <li>Trimi»õi linkul clien»õilor</li>
                            </ul>
                        </li>
                        <li><strong>Op»õiune 3 - Hosting gratuit:</strong> GitHub Pages (te √ÆnvƒÉ»õ cum dacƒÉ vrei!)</li>
                    </ol>
                </div>

                <div class="help-card">
                    <h4>üîÑ 4. RezervƒÉri Recurente</h4>
                    <ul>
                        <li>BifeazƒÉ "üîÑ Rezervare RecurentƒÉ" c√¢nd faci programarea</li>
                        <li>Alege c√¢te sƒÉptƒÉm√¢ni se repetƒÉ (ex: 4, 8, 12 sƒÉptƒÉm√¢ni)</li>
                        <li><strong>Exemplu:</strong> Client vrea fiecare Luni 10:00 ‚Üí bifezi recuren»õƒÉ 12 sƒÉptƒÉm√¢ni ‚Üí se creeazƒÉ AUTOMAT!</li>
                        <li>Recuren»õa apare cu <strong>chenar punctat ro»ôu</strong> üîÑ</li>
                    </ul>
                </div>

                <div class="help-card">
                    <h4>üì± 5. Acces de pe Telefon</h4>
                    <ul>
                        <li>Trimite fi»ôierul prin email pe telefon</li>
                        <li>DescarcƒÉ-l pe telefon</li>
                        <li>Deschide cu Chrome/Safari</li>
                        <li><strong>SAU:</strong> Pune fi»ôierul pe Google Drive ‚Üí AcceseazƒÉ de oriunde!</li>
                    </ul>
                </div>

                <div class="help-card">
                    <h4>‚ú® 6. Tips & Tricks</h4>
                    <ul>
                        <li><strong>Backup sƒÉptƒÉm√¢nal:</strong> √én fiecare Vineri, salveazƒÉ backup</li>
                        <li><strong>Blocare salƒÉ pentru √Æntre»õinere:</strong> CreeazƒÉ rezervare "√éNTRE»öINERE"</li>
                        <li><strong>CƒÉutare rapidƒÉ:</strong> Ctrl+F ‚Üí CautƒÉ nume client</li>
                        <li><strong>Pre»õuri diferite:</strong> NoteazƒÉ √Æn c√¢mpul "Pre»õ" pentru fiecare rezervare</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pentru Rezervare/Editare -->
    <div class="modal" id="bookingModal">
        <div class="modal-content">
            <div class="modal-header" id="modalTitle">‚ú® Rezervare NouƒÉ</div>
            
            <div class="info-readonly" id="slotInfo"></div>

            <div class="form-group">
                <label>üíÅ‚Äç‚ôÄÔ∏è Nume Client / FirmƒÉ *</label>
                <input type="text" id="clientName" placeholder="Ex: Asocia»õia SportivƒÉ ABC">
            </div>

            <div class="form-group">
                <label>üì± Telefon *</label>
                <input type="tel" id="clientPhone" placeholder="Ex: 0722123456">
            </div>

            <div class="form-group">
                <label>üìß Email</label>
                <input type="email" id="clientEmail" placeholder="Ex: contact@firma.ro">
            </div>

            <div class="form-group">
                <label>üè∑Ô∏è Status *</label>
                <select id="bookingStatus">
                    <option value="reserved">Rezervat</option>
                    <option value="confirmed">Confirmat</option>
                    <option value="paid">PlƒÉtit</option>
                </select>
            </div>

            <div class="form-group">
                <label>üí∞ Pre»õ (lei)</label>
                <input type="number" id="bookingPrice" placeholder="Ex: 150">
            </div>

            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="isRecurring" onchange="toggleRecurringOptions()">
                    <label for="isRecurring">üîÑ Rezervare RecurentƒÉ (se repetƒÉ sƒÉptƒÉm√¢nal)</label>
                </div>
                
                <div class="recurring-options" id="recurringOptions">
                    <div class="form-group">
                        <label>C√¢te sƒÉptƒÉm√¢ni se repetƒÉ? *</label>
                        <select id="recurringWeeks">
                            <option value="2">2 sƒÉptƒÉm√¢ni</option>
                            <option value="4">4 sƒÉptƒÉm√¢ni (1 lunƒÉ)</option>
                            <option value="8">8 sƒÉptƒÉm√¢ni (2 luni)</option>
                            <option value="12" selected>12 sƒÉptƒÉm√¢ni (3 luni)</option>
                            <option value="16">16 sƒÉptƒÉm√¢ni (4 luni)</option>
                            <option value="24">24 sƒÉptƒÉm√¢ni (6 luni)</option>
                            <option value="52">52 sƒÉptƒÉm√¢ni (1 an)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>üìù Note / Observa»õii</label>
                <textarea id="bookingNotes" placeholder="Detalii suplimentare..."></textarea>
            </div>

            <div class="modal-buttons">
                <button class="btn-save" onclick="saveBooking()">üíæ SalveazƒÉ</button>
                <button class="btn-delete" id="deleteBtn" onclick="deleteBooking()" style="display: none;">üóëÔ∏è »òterge</button>
                <button class="btn-cancel" onclick="closeModal()">‚úñ AnuleazƒÉ</button>
            </div>
        </div>
    </div>

    <script>
        // Date »ôi configurare
        let currentWeekStart = new Date();
        let bookings = JSON.parse(localStorage.getItem('roomBookings')) || {};
        let currentEditingSlot = null;

        const HOURS = Array.from({length: 14}, (_, i) => i + 7); // 07:00 - 20:00
        const DAYS = ['Luni', 'Mar»õi', 'Miercuri', 'Joi', 'Vineri', 'S√¢mbƒÉtƒÉ', 'DuminicƒÉ'];
        const ROOMS = [1, 2, 3];

        // Ini»õializare
        function init() {
            setWeekToMonday();
            renderCalendar();
            updateWeekDisplay();
            updateStats();
        }

        function setWeekToMonday() {
            const day = currentWeekStart.getDay();
            const diff = currentWeekStart.getDate() - day + (day === 0 ? -6 : 1);
            currentWeekStart.setDate(diff);
            currentWeekStart.setHours(0, 0, 0, 0);
        }

        function getWeekDates() {
            const dates = [];
            for (let i = 0; i < 7; i++) {
                const date = new Date(currentWeekStart);
                date.setDate(currentWeekStart.getDate() + i);
                dates.push(date);
            }
            return dates;
        }

        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        function getBookingKey(date, hour, room) {
            return `${formatDate(date)}_${hour}_${room}`;
        }

        function toggleRecurringOptions() {
            const checkbox = document.getElementById('isRecurring');
            const options = document.getElementById('recurringOptions');
            options.classList.toggle('active', checkbox.checked);
        }

        function renderCalendar() {
            const tbody = document.getElementById('calendarBody');
            tbody.innerHTML = '';
            const weekDates = getWeekDates();

            HOURS.forEach(hour => {
                const row = document.createElement('tr');
                
                // Coloana cu ora
                const timeCell = document.createElement('td');
                timeCell.className = 'time-cell';
                timeCell.textContent = `${hour}:00`;
                row.appendChild(timeCell);

                // Celule pentru fiecare zi »ôi salƒÉ
                weekDates.forEach(date => {
                    ROOMS.forEach(room => {
                        const cell = document.createElement('td');
                        const key = getBookingKey(date, hour, room);
                        const booking = bookings[key];

                        if (booking) {
                            cell.className = booking.status;
                            if (booking.isRecurring) {
                                cell.classList.add('recurring');
                            }
                            cell.innerHTML = `
                                ${booking.isRecurring ? '<span class="recurring-badge">üîÑ</span>' : ''}
                                <div class="client-name">${booking.clientName}</div>
                                <div class="client-phone">${booking.clientPhone}</div>
                            `;
                        }

                        cell.onclick = () => openBookingModal(date, hour, room, booking);
                        row.appendChild(cell);
                    });
                });

                tbody.appendChild(row);
            });
        }

        function openBookingModal(date, hour, room, booking = null) {
            const modal = document.getElementById('bookingModal');
            const modalTitle = document.getElementById('modalTitle');
            const slotInfo = document.getElementById('slotInfo');
            const deleteBtn = document.getElementById('deleteBtn');

            currentEditingSlot = { date, hour, room };

            const dayName = DAYS[date.getDay() === 0 ? 6 : date.getDay() - 1];
            const dateStr = date.toLocaleDateString('ro-RO');
            
            slotInfo.textContent = `üìç ${dayName}, ${dateStr} | ‚è∞ ${hour}:00 | üö™ Sala ${room}`;

            if (booking) {
                modalTitle.textContent = '‚úèÔ∏è EditeazƒÉ Rezervare';
                document.getElementById('clientName').value = booking.clientName || '';
                document.getElementById('clientPhone').value = booking.clientPhone || '';
                document.getElementById('clientEmail').value = booking.clientEmail || '';
                document.getElementById('bookingStatus').value = booking.status || 'reserved';
                document.getElementById('bookingPrice').value = booking.price || '';
                document.getElementById('bookingNotes').value = booking.notes || '';
                document.getElementById('isRecurring').checked = booking.isRecurring || false;
                document.getElementById('recurringWeeks').value = booking.recurringWeeks || '12';
                toggleRecurringOptions();
                deleteBtn.style.display = 'block';
            } else {
                modalTitle.textContent = '‚ú® Rezervare NouƒÉ';
                document.getElementById('clientName').value = '';
                document.getElementById('clientPhone').value = '';
                document.getElementById('clientEmail').value = '';
                document.getElementById('bookingStatus').value = 'reserved';
                document.getElementById('bookingPrice').value = '';
                document.getElementById('bookingNotes').value = '';
                document.getElementById('isRecurring').checked = false;
                document.getElementById('recurringWeeks').value = '12';
                toggleRecurringOptions();
                deleteBtn.style.display = 'none';
            }

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('bookingModal').classList.remove('active');
            currentEditingSlot = null;
        }

        function saveBooking() {
            if (!currentEditingSlot) return;

            const clientName = document.getElementById('clientName').value.trim();
            const clientPhone = document.getElementById('clientPhone').value.trim();

            if (!clientName || !clientPhone) {
                alert('‚ö†Ô∏è Te rog completeazƒÉ Nume »ôi Telefon!');
                return;
            }

            const { date, hour, room } = currentEditingSlot;
            const isRecurring = document.getElementById('isRecurring').checked;
            const recurringWeeks = parseInt(document.getElementById('recurringWeeks').value);

            const bookingData = {
                clientName,
                clientPhone,
                clientEmail: document.getElementById('clientEmail').value.trim(),
                status: document.getElementById('bookingStatus').value,
                price: document.getElementById('bookingPrice').value,
                notes: document.getElementById('bookingNotes').value.trim(),
                isRecurring,
                recurringWeeks: isRecurring ? recurringWeeks : null,
                createdAt: bookings[getBookingKey(date, hour, room)]?.createdAt || new Date().toISOString()
            };

            if (isRecurring) {
                // CreeazƒÉ rezervƒÉri recurente
                for (let week = 0; week < recurringWeeks; week++) {
                    const recurringDate = new Date(date);
                    recurringDate.setDate(date.getDate() + (week * 7));
                    const key = getBookingKey(recurringDate, hour, room);
                    bookings[key] = { ...bookingData };
                }
                alert(`‚úÖ Rezervare recurentƒÉ creatƒÉ pentru ${recurringWeeks} sƒÉptƒÉm√¢ni!`);
            } else {
                // Rezervare simplƒÉ
                const key = getBookingKey(date, hour, room);
                bookings[key] = bookingData;
            }

            saveToStorage();
            renderCalendar();
            updateStats();
            closeModal();
        }

        function deleteBooking() {
            if (!currentEditingSlot) return;
            
            const { date, hour, room } = currentEditingSlot;
            const key = getBookingKey(date, hour, room);
            const booking = bookings[key];

            if (booking && booking.isRecurring) {
                if (confirm('üîÑ Aceasta este o rezervare recurentƒÉ. Vrei sƒÉ »ôtergi TOATE rezervƒÉrile recurente sau doar pe aceasta?')) {
                    // »òterge toate rezervƒÉrile recurente
                    const recurringWeeks = booking.recurringWeeks;
                    for (let week = 0; week < recurringWeeks; week++) {
                        const recurringDate = new Date(date);
                        recurringDate.setDate(date.getDate() + (week * 7));
                        const delKey = getBookingKey(recurringDate, hour, room);
                        delete bookings[delKey];
                    }
                    alert('‚úÖ Toate rezervƒÉrile recurente au fost »ôterse!');
                } else {
                    // »òterge doar aceasta
                    delete bookings[key];
                }
            } else {
                if (!confirm('üóëÔ∏è Sigur vrei sƒÉ »ôtergi aceastƒÉ rezervare?')) return;
                delete bookings[key];
            }

            saveToStorage();
            renderCalendar();
            updateStats();
            closeModal();
        }

        function saveToStorage() {
            localStorage.setItem('roomBookings', JSON.stringify(bookings));
        }

        function updateWeekDisplay() {
            const weekDates = getWeekDates();
            const start = weekDates[0].toLocaleDateString('ro-RO');
            const end = weekDates[6].toLocaleDateString('ro-RO');
            document.getElementById('currentWeek').textContent = `${start} - ${end}`;
        }

        function previousWeek() {
            currentWeekStart.setDate(currentWeekStart.getDate() - 7);
            renderCalendar();
            updateWeekDisplay();
            updateStats();
        }

        function nextWeek() {
            currentWeekStart.setDate(currentWeekStart.getDate() + 7);
            renderCalendar();
            updateWeekDisplay();
            updateStats();
        }

        function goToToday() {
            currentWeekStart = new Date();
            setWeekToMonday();
            renderCalendar();
            updateWeekDisplay();
            updateStats();
        }

        function updateStats() {
            const weekDates = getWeekDates();
            const stats = {
                sala1: { total: 0, occupied: 0 },
                sala2: { total: 0, occupied: 0 },
                sala3: { total: 0, occupied: 0 },
                totalRevenue: 0,
                totalBookings: 0,
                recurringCount: 0
            };

            weekDates.forEach(date => {
                HOURS.forEach(hour => {
                    ROOMS.forEach(room => {
                        const key = getBookingKey(date, hour, room);
                        const salaKey = `sala${room}`;
                        stats[salaKey].total++;

                        if (bookings[key]) {
                            stats[salaKey].occupied++;
                            stats.totalBookings++;
                            if (bookings[key].isRecurring) {
                                stats.recurringCount++;
                            }
                            if (bookings[key].price) {
                                stats.totalRevenue += parseFloat(bookings[key].price);
                            }
                        }
                    });
                });
            });

            const statsGrid = document.getElementById('statsGrid');
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <h4>üö™ Sala 1</h4>
                    <div class="stat-value">${Math.round(stats.sala1.occupied / stats.sala1.total * 100)}%</div>
                    <div>${stats.sala1.occupied}/${stats.sala1.total} ore ocupate</div>
                </div>
                <div class="stat-card">
                    <h4>üö™ Sala 2</h4>
                    <div class="stat-value">${Math.round(stats.sala2.occupied / stats.sala2.total * 100)}%</div>
                    <div>${stats.sala2.occupied}/${stats.sala2.total} ore ocupate</div>
                </div>
                <div class="stat-card">
                    <h4>üö™ Sala 3</h4>
                    <div class="stat-value">${Math.round(stats.sala3.occupied / stats.sala3.total * 100)}%</div>
                    <div>${stats.sala3.occupied}/${stats.sala3.total} ore ocupate</div>
                </div>
                <div class="stat-card">
                    <h4>üìä Total RezervƒÉri</h4>
                    <div class="stat-value">${stats.totalBookings}</div>
                    <div>${stats.recurringCount} recurente üîÑ</div>
                </div>
                <div class="stat-card">
                    <h4>üí∞ Venituri Estimate</h4>
                    <div class="stat-value">${stats.totalRevenue.toFixed(0)} lei</div>
                    <div>sƒÉptƒÉm√¢na curentƒÉ</div>
                </div>
            `;
        }

        function exportData() {
            const dataStr = JSON.stringify(bookings, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            const dateStr = new Date().toISOString().split('T')[0];
            link.download = `backup_rezervari_${dateStr}.json`;
            link.click();
            URL.revokeObjectURL(url);
            alert('‚úÖ Backup salvat cu succes!\n\nüìÅ CautƒÉ fi»ôierul √Æn folder-ul "Downloads".\nüí° PƒÉstreazƒÉ acest backup √Æn siguran»õƒÉ pe Google Drive sau Dropbox!');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const importedData = JSON.parse(event.target.result);
                        if (confirm('‚ö†Ô∏è Acest lucru va √Ænlocui toate rezervƒÉrile curente cu cele din backup.\n\nContinui?')) {
                            bookings = importedData;
                            saveToStorage();
                            renderCalendar();
                            updateStats();
                            alert('‚úÖ Backup restaurat cu succes!\n\nToate rezervƒÉrile au fost actualizate.');
                        }
                    } catch (error) {
                        alert('‚ùå Eroare la restaurarea backup-ului!\n\nVerificƒÉ cƒÉ ai selectat fi»ôierul corect (.json).');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // Click √Æn afara modalului pentru a-l √Ænchide
        window.onclick = (event) => {
            const modal = document.getElementById('bookingModal');
            if (event.target === modal) {
                closeModal();
            }
        };

        // Ini»õializare la √ÆncƒÉrcarea paginii
        init();
    </script>
</body>
</html>